<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ðŸ’œ 2 Player Question Game ðŸ’œ</title>
  <script type="module">
    // import firebase
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
    import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-database.js";

    // ðŸ”¥ paste your own config here
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT.firebaseapp.com",
      databaseURL: "https://YOUR_PROJECT.firebaseio.com",
      projectId: "YOUR_PROJECT",
      storageBucket: "YOUR_PROJECT.appspot.com",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
	
	const firebaseConfig = {
  apiKey: "AIzaSyBGR79jHTrXO71izWaSyWLnW2diUOVk1s4",<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ðŸ’œ 2 Player Question Game ðŸ’œ</title>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
    import { getDatabase, ref, set, onValue, get } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBGR79jHTrXO71izWaSyWLnW2diUOVk1s4",
      authDomain: "gametest-114ff.firebaseapp.com",
      databaseURL: "https://gametest-114ff-default-rtdb.firebaseio.com",
      projectId: "gametest-114ff",
      storageBucket: "gametest-114ff.firebasestorage.app",
      messagingSenderId: "784588934650",
      appId: "1:784588934650:web:44772fd223df1ac981e843"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    const questionPairs = [
       ["what's the worst decision you've ever made?", "what's the best decision you've ever made?"],
      ["what's the worst advice you've ever taken?", "what's the best advice you've ever gotten?"],
      ["what's the best feeling in the world?", "what's the worst feeling in the world?"],
      ["what's something that ended too soon?", "what's something that lasted too long?"],
      ["what's something you always notice but rarely mention?", "what's something that makes you feel weirdly calm?"],
      ["what's your favorite time of day?", "when do you feel most like yourself?"],
      ["what's something you keep but don't use?", "what do you forget until you see it again?"],
      ["what makes you nervous for no reason?", "what do you overthink too much?"],
      ["what do you always bring with you but rarely use?", "what's something you only use when you're alone?"],
      ["what's something you never got to say?", "what do you regret most?"],
      ["what moment felt like forever?", "what moment do you wish you could go back to?"],
      ["what did you think would last forever?", "what broke without a sound?"],
      ["what have you hidden from others?", "what are you afraid someone will find out?"],
      ["what do you think they remember you for?", "what part of you do you wish someone noticed?"],
      ["what makes you laugh when you're alone?", "what makes you cry when you're alone?"],
      ["what's a habit you can't break?", "what's a habit you're proud of?"],
      ["what's something you avoid thinking about?", "what's something you can't stop thinking about?"],
      ["what was your favorite thing as a child?", "what did you fear most as a child?"],
      ["what's something you want to be remembered for?", "what's something you hope no one remembers about you?"],
      ["what's the biggest lie you've told?", "what's a truth you've never said out loud?"],
      ["what's something you lost but never replaced?", "what's something you found when you weren't looking?"],
      ["what's something you're good at?", "what's something you pretend to be good at?"],
      ["what's something that comforts you?", "what's something that disturbs you?"],
      ["what do you wish people asked you about more?", "what question do you fear being asked?"],
      ["what's something that makes you feel small?", "what's something that makes you feel infinite?"],
      ["what's the last thing you gave up on?", "what's the last thing you held onto?"],
      ["what makes a good day?", "what ruins a day for you?"],
      ["what's your favorite sound?", "what's a sound you hate?"],
      ["what's something you hate that everyone loves?", "what's something you love that no one understands?"],
      ["what do you wish you did more?", "what do you wish you did less?"],
      ["what's something you admire in others?", "what's something you try to hide from others?"],
      ["what's something that drains you?", "what gives you energy?"],
      ["what's a place you miss?", "what's a place you avoid?"],
      ["what's something you're still learning?", "what's something you already know about yourself?"],
      ["what's something you never talk about?", "what's something you never shut up about?"],
      ["what makes you feel most at peace?", "what makes you feel most alive?"],
      ["what's a memory you cling to?", "what's a memory you try to forget?"],
      ["what's something you secretly enjoy?", "what's something you pretend to enjoy?"],
      ["what's something people always assume about you?", "what's something no one ever guesses about you?"],
      ["what do you need to hear more often?", "what do you wish people would stop saying?"],
      ["what's something you do for others?", "what's something you wish someone did for you?"],
      ["what scares you more than it should?", "what doesn't scare you even though it should?"],
      ["what's a risk you took?", "what's a risk you didn't take?"],
      ["what makes something feel like home?", "what makes something feel unfamiliar?"],
      ["what makes you stay?", "what makes you leave?"],
      ["what's your favorite lie to tell?", "what's the truth you always tell?"],
      ["what do you hope for most?", "what do you fear most?"],
      ["what's a pattern you repeat?", "what's a pattern you've broken?"],
      ["what's something that makes you feel free?", "what's something that makes you feel trapped?"],
      ["what's a question you wish you could answer?", "what's a question you never want to be asked?"],
      ["what makes you feel grounded?", "what makes you feel like you're floating?"]
    ];

    let roomCode = "";
    let player = "";
    let score = 0;
    let myQuestion = "";

    function joinRoom() {
      roomCode = document.getElementById("room").value;
      player = prompt("Are you Player 1 or Player 2? (type 1 or 2)");
      if (player !== "1" && player !== "2") {
        alert("please type 1 or 2");
        return;
      }

      // Listen for number changes
      const numRef = ref(db, "rooms/" + roomCode + "/number");
      onValue(numRef, async (snapshot) => {
        const num = snapshot.val();
        if (num) showQuestions(num);
      });

      // Listen for score changes
      const scoreRef = ref(db, "rooms/" + roomCode + "/score" + player);
      onValue(scoreRef, (snapshot) => {
        const s = snapshot.val();
        if (s !== null) document.getElementById("score").textContent = "Your Score: " + s;
      });
    }

    function chooseNumber() {
      const num = parseInt(document.getElementById("num").value);
      if (num >= 1 && num <= questionPairs.length) {
        set(ref(db, "rooms/" + roomCode + "/number"), num);
      } else {
        alert("choose a number between 1 and " + questionPairs.length);
      }
    }

    async function showQuestions(num) {
      const pair = questionPairs[num - 1];
      // randomly pick for each player independently
      myQuestion = pair[Math.floor(Math.random() * 2)];
      document.getElementById("question").textContent = "Your Question: " + myQuestion;
    }

    async function guessSame() {
      const numRef = ref(db, "rooms/" + roomCode + "/number");
      const snapshot = await get(numRef);
      const num = snapshot.val();
      const pair = questionPairs[num - 1];
      const otherQuestion = pair.find(q => q !== myQuestion) || myQuestion;

      const guess = prompt("Do you think both got the same question? (yes/no)").toLowerCase();

      let otherPlayerNum = player === "1" ? "2" : "1";
      const scoreRef = ref(db, "rooms/" + roomCode + "/score" + player);
      let currentScore = 0;
      const scoreSnap = await get(scoreRef);
      if (scoreSnap.exists()) currentScore = scoreSnap.val();

      const actuallySame = myQuestion === otherQuestion;
      if ((guess === "yes" && actuallySame) || (guess === "no" && !actuallySame)) {
        alert("Correct! +1 point ðŸ’–");
        currentScore++;
        set(scoreRef, currentScore);
      } else {
        alert("Oops! Try again next round ðŸ˜¢");
      }
    }

    window.joinRoom = joinRoom;
    window.chooseNumber = chooseNumber;
    window.guessSame = guessSame;
  </script>
</head>
<body>
  <h1>ðŸ’œ 2 Player Question Game ðŸ’œ</h1>

  <input id="room" placeholder="Enter room code">
  <button onclick="joinRoom()">Join Room</button>
  <br><br>

  <input id="num" type="number" placeholder="1-50" min="1" max="50">
  <button onclick="chooseNumber()">Choose Number</button>

  <h2 id="question"></h2>
  <button onclick="guessSame()">Guess if Same</button>
  <h2 id="score">Your Score: 0</h2>
</body>
</html>
